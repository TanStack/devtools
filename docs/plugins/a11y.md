---
title: Accessibility Plugin
id: a11y-plugin
---

The TanStack Devtools Accessibility (A11y) Plugin provides real-time accessibility auditing for your web applications, powered by [axe-core](https://github.com/dequelabs/axe-core). It helps you identify and fix accessibility issues during development.

## Features

- **Full Page Scanning** - Audit your entire page for accessibility violations
- **Component-Level Scanning** - Scope audits to specific components using React hooks
- **Live Monitoring** - Automatically re-scan when the DOM changes
- **Visual Overlays** - Highlight problematic elements with severity-based colors
- **Click-to-Navigate** - Click on an issue to automatically scroll to and highlight the element
- **Dark Mode Support** - Automatically adapts to the devtools theme
- **Devtools-Aware** - Automatically excludes devtools panels from scanning
- **Configurable Rule Sets** - Support for WCAG 2.0/2.1/2.2 (A/AA/AAA), Section 508, and best practices
- **Export Reports** - Download results as JSON or CSV
- **Persistent Settings** - Configuration saved to localStorage

## Installation

```bash
npm install @tanstack/devtools-a11y
# or
pnpm add @tanstack/devtools-a11y
# or
yarn add @tanstack/devtools-a11y
```

## Quick Start (React)

```tsx
import { createRoot } from 'react-dom/client'
import { TanStackDevtools } from '@tanstack/react-devtools'
import { A11yDevtoolsPanel } from '@tanstack/devtools-a11y/react'

createRoot(document.getElementById('root')!).render(
  <>
    <App />
    <TanStackDevtools
      plugins={[
        {
          id: 'devtools-a11y',
          name: 'Accessibility',
          // Use function form to receive theme from devtools
          render: (_el, theme) => (
            <A11yDevtoolsPanel theme={theme} />
          ),
        },
      ]}
    />
  </>,
)
```

## Dark Mode Support

The A11yDevtoolsPanel automatically adapts to the devtools theme when you use the function form of the `render` prop:

```tsx
// Receives theme ('light' | 'dark') from devtools
render: (_el, theme) => <A11yDevtoolsPanel theme={theme} />
```

If you don't need theme integration, you can use the simpler JSX form:

```tsx
render: <A11yDevtoolsPanel />  // Defaults to light theme
```

## Click-to-Navigate

When you click on an issue in the panel, the plugin will:

1. **Scroll** the problematic element into view (centered in the viewport)
2. **Highlight** the element with a pulsing overlay matching its severity color
3. **Show a tooltip** with the rule ID and impact level

This makes it easy to locate and inspect issues directly on the page.

## Panel Configuration

`A11yDevtoolsPanel` is React-first and takes an `options` prop that matches `A11yPluginOptions`.

```tsx
import type { A11yPluginOptions } from '@tanstack/devtools-a11y'

interface A11yDevtoolsPanelProps {
  options?: A11yPluginOptions
  theme?: 'light' | 'dark'
}
```

Common `options` fields:

- `threshold`: minimum impact level to show
- `ruleSet`: rule preset (`'wcag2a' | 'wcag2aa' | 'wcag21aa' | 'wcag22aa' | 'section508' | 'best-practice' | 'all'`)
- `disabledRules`: rule IDs to ignore
- `showOverlays`: highlight issues in the page
- `runOnMount`: auto-scan when panel mounts
- `persistSettings`: store config in localStorage
- `liveMonitoring`: watch DOM mutations and re-scan automatically
- `liveMonitoringDelay`: debounce delay (ms)

### Example with Configuration

```tsx
<A11yDevtoolsPanel
  theme={theme}
  options={{
    ruleSet: 'wcag21aa',
    threshold: 'moderate',
    runOnMount: true,
    showOverlays: true,
    liveMonitoring: true,
    liveMonitoringDelay: 1000,
    disabledRules: ['color-contrast'],
  }}
/>
```

## Severity Levels

Issues are categorized by impact level with corresponding overlay colors:

| Impact | Color | Description |
|--------|-------|-------------|
| Critical | Red | Must be fixed - prevents users from accessing content |
| Serious | Orange | Should be fixed - significantly impacts user experience |
| Moderate | Yellow | Consider fixing - affects some users |
| Minor | Blue | Optional improvement - minor impact |

## React Hooks

The package provides React hooks for component-level accessibility scanning.

### useA11yAudit

Run accessibility audits programmatically:

```tsx
import { useA11yAudit } from '@tanstack/devtools-a11y/react'

function MyComponent() {
  const { audit, result, isScanning, error } = useA11yAudit()
  
  return (
    <div>
      <button onClick={() => audit()}>Run Audit</button>
      {result && (
        <div>
          Found {result.issues.length} issues
        </div>
      )}
    </div>
  )
}
```

### useA11yRef

Scope audits to a specific element:

```tsx
import { useA11yRef } from '@tanstack/devtools-a11y/react'

function MyForm() {
  const { ref, audit, result } = useA11yRef<HTMLFormElement>()
  
  return (
    <form ref={ref}>
      <input type="text" />
      <button type="button" onClick={() => audit()}>
        Check Form Accessibility
      </button>
    </form>
  )
}
```

### useA11yOverlay

Control overlay visibility for specific elements:

```tsx
import { useA11yOverlay } from '@tanstack/devtools-a11y/react'

function MyComponent() {
  const { showOverlays, hideOverlays, toggleOverlays, isVisible } = useA11yOverlay()
  
  return (
    <button onClick={toggleOverlays}>
      {isVisible ? 'Hide' : 'Show'} Overlays
    </button>
  )
}
```

## Vanilla JavaScript API

For non-React applications, `createA11yPlugin()` exposes a small programmatic API in addition to the TanStack Devtools `render()` integration:

```ts
import { createA11yPlugin } from '@tanstack/devtools-a11y'

const plugin = createA11yPlugin({
  ruleSet: 'wcag21aa',
  liveMonitoring: true,
  showOverlays: true,
})

// Run a scan
const result = await plugin.scan?.()

// Subscribe to scan results (manual or live)
const unsubscribe = plugin.onScan?.((next) => {
  console.log('Issues found:', next.issues.length)
})

// Control live monitoring
plugin.startLiveMonitoring?.()
plugin.stopLiveMonitoring?.()

// Clean up
unsubscribe?.()
plugin.destroy?.()
```

## Export Formats

### JSON Export

```ts
import { exportToJSON } from '@tanstack/devtools-a11y'

const jsonString = exportToJSON(auditResult)
```

### CSV Export

```ts
import { exportToCSV } from '@tanstack/devtools-a11y'

const csvString = exportToCSV(auditResult)
```

## Supported Standards

The plugin supports the following accessibility standards:

- **WCAG 2.0** Level A, AA, AAA
- **WCAG 2.1** Level A, AA, AAA
- **WCAG 2.2** Level AA
- **Section 508**
- **Best Practices** (non-standard recommendations)

## Types

```ts
interface A11yIssue {
  id: string
  ruleId: string
  impact: 'critical' | 'serious' | 'moderate' | 'minor'
  description: string
  help: string
  helpUrl: string
  selector: string
  html: string
  failureSummary: string
  tags: string[]
}

interface A11yAuditResult {
  timestamp: number
  url: string
  standard: string
  issues: A11yIssue[]
  passes: number
  violations: number
  incomplete: number
  scanDuration: number
}

interface A11yConfig {
  standard: string
  liveMonitoring: boolean
  showOverlays: boolean
  scopedMode: boolean
  scopeSelector?: string
  excludeSelectors: string[]
  includeRules: string[]
  excludeRules: string[]
}
```

## Performance Considerations

- **Live monitoring** uses a debounced MutationObserver to avoid excessive re-scanning
- **Scoped scanning** is recommended for large pages to reduce scan time
- **Exclude selectors** can skip third-party widgets or known-good sections
- The first scan may be slower as axe-core initializes

## Troubleshooting

### Issues not appearing

1. Check that the element is visible in the viewport
2. Ensure the element is not excluded by `excludeSelectors`
3. Verify the selected standard includes the relevant rule

### Overlays not showing

1. Confirm overlays are enabled in the panel settings
2. Check for CSS conflicts with `z-index` or `pointer-events`
3. Ensure the container element exists in the DOM

### Performance issues

1. Disable live monitoring for large/complex pages
2. Use scoped scanning to limit the audit area
3. Increase the debounce delay for live monitoring

## Example

See the full working example at:
`examples/react/a11y-devtools/`

Run it with:
```bash
cd examples/react/a11y-devtools
pnpm dev
```
